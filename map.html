
<!doctype html><html lang="pt-BR"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Mapa - CON</title><link rel="stylesheet" href="./assets/style.css"><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/><script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script></head><body><header class="topbar"><div class="brand"><div class="logo">NEWS</div><div class="title">Mapa â€” Central Operacional News</div></div><div class="controls"><button onclick="window.close()" class="btn">Fechar</button></div></header><div id="mapFull" style="height:calc(100vh - 80px)"></div><script>(async function(){const map=L.map('mapFull').setView([-14.2350,-51.9253],4);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);const cache=JSON.parse(localStorage.getItem('congrl_cache')||'{"items":[]}');const items=cache.items||[];items.forEach(it=>{if(!it.lat||!it.lon) return; const emoji=it.type==='Acidente'?'ğŸš—':(it.type==='InterdiÃ§Ã£o'?'ğŸš§':(it.type==='Roubo'?'ğŸš¨':(it.type==='Furto'?'âšª':'âš ï¸'))); const icon=L.divIcon({html:`<div style="background:#0d47a1;color:#fff;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center">${emoji}</div>`,className:''}); L.marker([it.lat,it.lon],{icon}).addTo(map).bindPopup(`<strong>${it.title}</strong><br>${it.source}`);}); if(items.length){ const group = L.featureGroup(items.filter(i=>i.lat&&i.lon).map(i=>L.marker([i.lat,i.lon]))); try{ map.fitBounds(group.getBounds().pad(0.2)); }catch(e){} }})();</script></body></html>
